<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Quiz</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <div class="container mt-5">
      <h1>Create a New Quiz</h1>
      <form method="post">
        <div class="mb-3">
          <label for="title" class="form-label">Quiz Title</label>
          <input
            type="text"
            class="form-control"
            id="title"
            name="title"
            required
          />
        </div>
        <div class="mb-3">
          <label for="language" class="form-label">Language</label>
          <select class="form-select" id="language" name="language" required>
            <option value="en">English</option>
            <option value="fr">French</option>
            <option value="ar">Arabic</option>
          </select>
        </div>

        <div id="questions-container">
          <div class="question-block mb-3">
            <label class="form-label">Question 1</label>
            <input
              type="text"
              class="form-control mb-2"
              name="question_title"
              placeholder="Question Title"
              required
            />
            <div class="options-container mb-2">
              <div class="option-block mb-2">
                <input
                  type="text"
                  class="form-control"
                  name="options_0"
                  placeholder="Option 1"
                  required
                />
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    name="correct_0"
                    value="Option 1"
                  />
                  <label class="form-check-label">Correct Option</label>
                </div>
              </div>
            </div>
            <button type="button" class="btn btn-secondary btn-sm add-option">
              Add Option
            </button>
            <button type="button" class="btn btn-danger btn-sm remove-option">
              Remove Option
            </button>
          </div>
        </div>
        <button type="button" class="btn btn-primary" id="add-question">
          Add Another Question
        </button>
        <button type="submit" class="btn btn-success">Save Quiz</button>
      </form>
    </div>

    <script>
      let questionCount = 1;
      let optionCount = 1;

      document
        .getElementById("add-question")
        .addEventListener("click", function () {
          const container = document.getElementById("questions-container");
          const questionBlock = document.createElement("div");
          questionBlock.className = "question-block mb-3";
          questionBlock.innerHTML = `
                  <label class="form-label">Question ${
                    questionCount + 1
                  }</label>
                  <input type="text" class="form-control mb-2" name="question_title" placeholder="Question Title" required>
                  <div class="options-container mb-2">
                      <div class="option-block mb-2">
                          <input type="text" class="form-control" name="options_${questionCount}" placeholder="Option 1" required>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" name="correct_${questionCount}" value="Option 1">
                              <label class="form-check-label">Correct Option</label>
                          </div>
                      </div>
                  </div>
                  <button type="button" class="btn btn-secondary btn-sm add-option">Add Option</button>
                  <button type="button" class="btn btn-danger btn-sm remove-option">Remove Option</button>
              `;
          container.appendChild(questionBlock);
          questionCount++;
        });

      document
        .getElementById("questions-container")
        .addEventListener("click", function (event) {
          if (event.target.classList.contains("add-option")) {
            const optionContainer = event.target.previousElementSibling;
            const optionBlock = document.createElement("div");
            optionBlock.className = "option-block mb-2";
            optionBlock.innerHTML = `
                      <input type="text" class="form-control" name="options_${optionCount}" placeholder="Option ${
              optionCount + 1
            }" required>
                      <div class="form-check">
                          <input class="form-check-input" type="checkbox" name="correct_${optionCount}" value="Option ${
              optionCount + 1
            }">
                          <label class="form-check-label">Correct Option</label>
                      </div>
                  `;
            optionContainer.appendChild(optionBlock);
            optionCount++;
          }

          if (event.target.classList.contains("remove-option")) {
            const optionContainer = event.target.previousElementSibling;
            if (optionContainer.children.length > 1) {
              optionContainer.removeChild(optionContainer.lastElementChild);
            }
          }
        });
    </script>
  </body>
</html>
